@inherits LayoutComponentBase
<link href="style/card.css" rel="stylesheet">
<MudThemeProvider Theme="@_theme" IsDarkMode="_isDarkMode" />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />
<MudLayout>
    <MudAppBar Elevation="1">
        <MudHidden Breakpoint="Breakpoint.SmAndDown">
            <MudText Typo="Typo.h4" Class="ml-3">Smart Weather Station</MudText>
        </MudHidden>

        <MudHidden Breakpoint="Breakpoint.MdAndUp">
            <MudText Typo="Typo.h6" Class="ml-3">Smart Weather Station</MudText>
        </MudHidden>
        <MudSpacer />
        <MudIconButton Icon="@(DarkLightModeButtonIcon)" Color="Color.Inherit" OnClick="@DarkModeToggle" />
        <MudIconButton Icon="@Icons.Material.Filled.MoreVert" Color="Color.Inherit" Edge="Edge.End" />
    </MudAppBar>
    <MudMainContent Class="mt-16 pa-4">
        @Body
    </MudMainContent>
</MudLayout>


<div id="blazor-error-ui" data-nosnippet>
    An unhandled error has occurred.
    <a href="." class="reload">Reload</a>
    <span class="dismiss">🗙</span>
</div>

@code {

    private bool _isDarkMode = false;
    private MudTheme? _theme = null;

    protected override void OnInitialized()
    {
        base.OnInitialized();

        _theme = new()
            {
                PaletteLight = _lightPalette,
                PaletteDark = _darkPalette,
                LayoutProperties = new LayoutProperties()
            };
    }

    private void DarkModeToggle()
    {
        _isDarkMode = !_isDarkMode;
    }

    private readonly PaletteLight _lightPalette = new()
        {
            // Raspberry Pi Themed Light Palette
            Primary = "#c7053d",          // Raspberry Pi Red
            Surface = "#ffffff",          // White background for contrast
            Background = "#f5f5f5",       // Soft gray for a neutral feel
            BackgroundGray = "#e0e0e0",   // Slightly darker gray for subtle contrast
            AppbarText = "#2b2b2b",       // Dark text for good readability
            AppbarBackground = "#ffffff", // White Appbar background
            DrawerBackground = "#f5f5f5", // Matching background to keep it light
            ActionDefault = "#007e3a",    // Raspberry Pi Green for action elements
            ActionDisabled = "#a0a0a0",   // Muted gray for disabled actions
            ActionDisabledBackground = "#c0c0c0", // Soft gray for disabled backgrounds
            TextPrimary = "#1a1a1a",      // Strong black for primary text
            TextSecondary = "#4d4d4d",    // Dark gray for secondary text
            TextDisabled = "#909090",     // Lighter gray for disabled text
            DrawerIcon = "#c7053d",       // Raspberry Pi Red for icons
            DrawerText = "#c7053d",       // Red for drawer text
            GrayLight = "#dadada",        // Light gray for backgrounds
            GrayLighter = "#eeeeee",      // Even softer gray for contrast
            Info = "#007bff",             // Blue for information
            Success = "#34a853",          // Green for success (Raspberry Pi green)
            Warning = "#ffcc00",          // Yellow for warnings
            Error = "#d32f2f",            // Deep red for errors
            LinesDefault = "#b0b0b0",     // Subtle gray for lines
            TableLines = "#b0b0b0",       // Matching table lines
            Divider = "#a0a0a0",          // Gray divider for separation
            OverlayLight = "#ffffff"      // Light overlay

        };

    private readonly PaletteDark _darkPalette = new()
        {
            // Raspberry Pi Themed Dark Palette
            Primary = "#c7053d",          // Raspberry Pi Red
            Surface = "#1e1e2d",          // Dark background surface
            Background = "#1a1a27",       // Dark background for the overall theme
            BackgroundGray = "#151521",   // Slightly darker gray background for contrast
            AppbarText = "#92929f",       // Lighter gray text on dark app bar
            AppbarBackground = "#1a1a27", // Dark, semi-transparent appbar background
            DrawerBackground = "#1a1a27", // Dark drawer background
            ActionDefault = "#007e3a",    // Raspberry Pi Green for action elements
            ActionDisabled = "#9999994d", // Muted disabled actions (with opacity)
            ActionDisabledBackground = "#605f6d4d", // Soft disabled background
            TextPrimary = "#b2b0bf",      // Light gray primary text on dark theme
            TextSecondary = "#92929f",    // Light gray secondary text
            TextDisabled = "#ffffff33",   // Lighter disabled text with opacity
            DrawerIcon = "#92929f",       // Light gray drawer icon
            DrawerText = "#92929f",       // Light gray drawer text
            GrayLight = "#2a2833",        // Dark gray for lighter backgrounds
            GrayLighter = "#1e1e2d",      // Slightly darker background elements
            Info = "#4a86ff",             // Bright blue for info notifications
            Success = "#3dcb6c",          // Raspberry Pi green for success
            Warning = "#ffb545",          // Lighter yellow-orange for warnings
            Error = "#ff3f5f",            // Raspberry Pi Red for error
            LinesDefault = "#33323e",     // Subtle gray lines for dark theme
            TableLines = "#33323e",       // Matching table lines for dark theme
            Divider = "#292838",          // Divider for dark theme, subtle and soft
            OverlayLight = "#1e1e2d80"    // Semi-transparent dark overlay

        };

    public string DarkLightModeButtonIcon => _isDarkMode switch
    {
        true => Icons.Material.Rounded.LightMode,
        false => Icons.Material.Outlined.DarkMode,
    };
}


